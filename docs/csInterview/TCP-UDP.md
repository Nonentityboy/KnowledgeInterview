## 01: 讲一讲 UDP 的概念？
### 面向报文
UDP 是一个面向报文（报文可以理解为一段段的数据）的协议。意思就是 UDP 只是报文的搬运工，不会对报文进行任何拆分和拼接操作。

具体来说，在发送端，应用层将数据传递给传输层的 UDP 协议，UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给网络层了
在接收端，网络层将数据传递给传输层，UDP 只去除 IP 报文头就传递给应用层，不会任何拼接操作

### 不可靠性
UDP 是无连接的，也就是说通信不需要建立和断开连接。
UDP 也是不可靠的。协议收到什么数据就传递什么数据，并且也不会备份数据，对方能不能收到是不关心的
UDP 没有拥塞控制，一直会以恒定的速度发送数据。即使网络条件不好，也不会对发送速率进行调整。这样实现的弊端就是在网络条件不好的情况下可能会导致丢包，但是优点也很明显，在某些实时性要求高的场景（比如电话会议）就需要使用 UDP 而不是 TCP。

### 高效
因为 UDP 没有 TCP 那么复杂，需要保证数据不丢失且有序到达。所以 UDP 的头部开销小，只有八字节，相比 TCP 的至少二十字节要少得多，在传输数据报文时是很高效的。

头部包含了以下几个数据

两个十六位的端口号，分别为源端口（可选字段）和目标端口
整个数据报文的长度
整个数据报文的检验和（IPv4 可选 字段），该字段用于发现头部信息和数据中的错误
## 传输方式
UDP 不止支持`一对一`的传输方式，同样支持`一对多，多对多，多对一`的方式，也就是说 UDP 提供了`单播，多播，广播`的功能。

## 02: 讲讲TCP、UPD的区别？

### TCP、UPD基本区别：

* TCP是一个面向连接的、可靠的、基于字节流的传输协议。
* UDP是一个面向无连接的传输层协议。


### TCP三大核心特性

* 1. 面向连接。 客户端与服务器的连接，双方互相通信之前，TCP需要三次握手建立连接，UDP没有相应建立连接的过程。
* 2. 可靠性。TCP可靠性体现在？
  * TCP 精准的记录了哪些数据发送，哪些数据被接受了，哪些没有被接收到，而且保证数据包按序列到达，不允许半点差错。这是`有状态`
  * 当意识到丢包或者网络环境不佳，TCP会根据具体情况调整自己的行为，控制自己的发送速度或者重发。这是`可控制`。
  * 相应的，UDP是`无状态`，`不可控`的。
* 3. `面向字节流`。UDP的数据传输是基于数据报的，这是因为仅仅继承了IP层特性，而TCP 为了维护状态，将一个个IP包变成了字节流。

## 03:  TCP 三次握手的过程？为什么是三次而不是两次、四次？

### 三次握手过程
![](https://s1.ax1x.com/2020/06/18/NnhsNn.jpg)

* 从最开始双方都处于CLOSED状态。然后服务端开始监听某个端口，进入了LISTEN状态。

* 然后客户端主动发起连接，发送 SYN , 自己变成了SYN-SENT状态。

* 服务端接收到，返回SYN和ACK(对应客户端发来的SYN)，自己变成了SYN-REVD。

* 之后客户端再发送ACK给服务端，自己变成了ESTABLISHED状态；服务端收到ACK之后，也变成了ESTABLISHED状态。

> SYN 是需要消耗一个序列号的，下次发送对应的 ACK 序列号要加1，为什么呢？只需要记住一个规则: 凡是需要对端确认的，一定消耗TCP报文的序列号。

SYN 需要对端的确认， 而 ACK 并不需要，因此 SYN 消耗一个序列号而 ACK 不需要。

### 为什么不是两次？
根本原因: 无法确认客户端的接收能力。

分析如下:

如果是两次，你现在发了 SYN 报文想握手，但是这个包滞留在了当前的网络中迟迟没有到达，TCP 以为这是丢了包，于是重传，两次握手建立好了连接。

看似没有问题，但是连接关闭后，如果这个滞留在网路中的包到达了服务端呢？这时候由于是两次握手，服务端只要接收到然后发送相应的数据包，就默认建立连接，但是现在客户端已经断开了。

这就带来了连接资源的浪费。

### 为什么不是四次？
三次握手的目的是确认双方发送和接收的能力，那四次握手可以嘛？

当然可以，100 次都可以。但为了解决问题，三次就足够了，再多用处就不大了

### 三次握手过程中可以携带数据么？
第三次握手的时候，可以携带。前两次握手不能携带数据。

如果前两次握手能够携带数据，那么一旦有人想攻击服务器，那么他只需要在第一次握手中的 SYN 报文中放大量数据，那么服务器势必会消耗更多的时间和内存空间去处理这些数据，增大了服务器被攻击的风险。

第三次握手的时候，客户端已经处于ESTABLISHED状态，并且已经能够确认服务器的接收、发送能力正常，这个时候相对安全了，可以携带数据。

## 04: 说说 TCP 四次挥手的过程

### 四次挥手
![](https://s1.ax1x.com/2020/06/19/NnIRjf.jpg)